(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[959],{2634:()=>{},8023:(e,t,a)=>{Promise.resolve().then(a.bind(a,8199))},1841:(e,t,a)=>{"use strict";a.d(t,{f:()=>r});var s=a(2120);let r=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await s.A.post("/knowledgebase/archive_file",e)).data}catch(e){console.error(e)}}},7573:(e,t,a)=>{"use strict";a.d(t,{h:()=>i});var s=a(2120),r=a(1973),n=a.n(r);let i=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await s.A.get("/knowledgebase/list?".concat(n().stringify(e)))).data}catch(e){throw console.error("Failed to fetch knowledge list:",e),e}}},8199:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var s=a(5155),r=a(6899),n=a(5683),i=a(2115),o=a(2336),l=a(4505),d=a(853),c=a(9602);function u(e){let{onSearch:t,isSearching:a}=e,[n,u]=(0,i.useState)(""),[f,m]=(0,i.useState)(!0),p=()=>{n.trim()&&t(n)};return(0,s.jsx)(r.P.div,{className:"flex flex-col sm:flex-row items-center gap-4 p-4 w-full max-w-3xl mx-auto",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,s.jsx)(o.p,{type:"text",placeholder:"搜索",className:"flex-grow",value:n,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"!==e.key||a||p()},disabled:a}),(0,s.jsx)(r.P.button,{className:(0,c.cn)("p-2 bg-blue-500 text-white rounded transition-colors duration-200",a?"bg-blue-400":"hover:bg-blue-600"),whileHover:a?{}:{scale:1.05},whileTap:a?{}:{scale:.95},onClick:p,disabled:a,children:a?(0,s.jsx)(l.A,{className:"h-5 w-5 animate-spin"}):(0,s.jsx)(d.A,{className:"h-5 w-5"})})]})})}var f=a(3392);function m(e){let{result:t}=e,[a,n]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{t&&n(!0)},[t]),a)?(0,s.jsxs)(r.P.div,{className:"p-4 bg-blue-100 rounded shadow-md w-full max-w-3xl",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[(0,s.jsx)("h2",{className:"text-lg font-bold mb-2",children:"搜索结果"}),(0,s.jsx)(f.F,{className:"h-[60vh] rounded-md",children:(0,s.jsx)(r.P.div,{className:"p-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:(0,s.jsx)("p",{className:"text-gray-600 break-all",children:t.text})})})]}):null}var p=a(7573),h=a(2120),x=a(1973),y=a.n(x);let v=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await h.A.get("/knowledgebase/internet_search?".concat(y().stringify(e)))).data}catch(e){throw console.error("Failed to fetch internet search:",e),e}};var g=a(1841),b=a(241);let w=(0,a(7401).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var N=a(4085),j=a(750);function S(){let{toast:e}=(0,b.dj)(),[t,a]=(0,i.useState)([]),[o,d]=(0,i.useState)(!1),[c,f]=(0,i.useState)({}),[h,x]=(0,i.useState)(!1);(0,i.useEffect)(()=>{y()},[]);let y=()=>{(0,p.h)().then(e=>{a(e.data.map(e=>e.name))})},S=t=>{let a={name:t,file_name:c.file_name,file_path:c.file_path};(0,g.f)(a).then(a=>{200===a.code?e({title:"导入成功",description:"搜索结果已导入到 ".concat(t)}):e({title:"导入失败",description:a.msg})})};return(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)(r.P.div,{className:"flex flex-col items-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,s.jsx)(r.P.div,{className:"w-full max-w-3xl ".concat(h?"mb-8":"flex items-center justify-center h-[50vh]"),initial:!1,animate:{height:h?"auto":"50vh"},children:(0,s.jsx)(u,{onSearch:t=>{d(!0),x(!0),v({query:t}).then(t=>{200===t.code?(f(t.data),e({title:"搜索成功",description:"搜索结果已保存到"+t.data.file_path})):e({title:"搜索失败",description:t.msg})}).catch(t=>{e({title:"搜索失败",description:t})}).finally(()=>{d(!1)})},isSearching:o})}),(0,s.jsx)(n.N,{children:o&&(0,s.jsx)(r.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"mt-8",children:(0,s.jsx)(l.A,{className:"h-8 w-8 animate-spin"})})}),h&&!o&&(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"w-full max-w-3xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("span",{className:"text-lg font-semibold",children:["保存路径： ",c.file_path]}),(0,s.jsxs)(j.rI,{children:[(0,s.jsx)(j.ty,{asChild:!0,children:(0,s.jsxs)(N.$,{variant:"outline",children:[(0,s.jsx)(w,{className:"w-4 h-4 mr-2"}),"入库"]})}),(0,s.jsx)(j.SQ,{children:t.map((e,t)=>(0,s.jsx)(j._2,{onSelect:()=>S(e),children:e},t))})]})]}),(0,s.jsx)("div",{className:"bg-card text-card-foreground rounded-lg shadow-md",children:(0,s.jsx)(m,{result:c})})]})]})})}},4085:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>l});var s=a(5155),r=a(2115),n=a(2317),i=a(1027),o=a(9602);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:r,size:i,className:a})),ref:t,...c})});d.displayName="Button"},750:(e,t,a)=>{"use strict";a.d(t,{SQ:()=>f,_2:()=>m,rI:()=>c,ty:()=>u});var s=a(5155),r=a(2115),n=a(3125),i=a(6967),o=a(8867),l=a(3565),d=a(9602);let c=n.bL,u=n.l9;n.YJ,n.ZL,n.Pb,n.z6,r.forwardRef((e,t)=>{let{className:a,inset:r,children:o,...l}=e;return(0,s.jsxs)(n.ZP,{ref:t,className:(0,d.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",a),...l,children:[o,(0,s.jsx)(i.A,{className:"ml-auto"})]})}).displayName=n.ZP.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.G5,{ref:t,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=n.G5.displayName;let f=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...i}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsx)(n.UC,{ref:t,sideOffset:r,className:(0,d.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});f.displayName=n.UC.displayName;let m=r.forwardRef((e,t)=>{let{className:a,inset:r,...i}=e;return(0,s.jsx)(n.q7,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",r&&"pl-8",a),...i})});m.displayName=n.q7.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,checked:i,...l}=e;return(0,s.jsxs)(n.H_,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:i,...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})}),r]})}).displayName=n.H_.displayName,r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(n.hN,{ref:t,className:(0,d.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(l.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=n.hN.displayName,r.forwardRef((e,t)=>{let{className:a,inset:r,...i}=e;return(0,s.jsx)(n.JU,{ref:t,className:(0,d.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",a),...i})}).displayName=n.JU.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=n.wv.displayName},2336:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var s=a(5155),r=a(2115),n=a(9602);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},3392:(e,t,a)=>{"use strict";a.d(t,{F:()=>o});var s=a(5155),r=a(2115),n=a(1868),i=a(9602);let o=r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsxs)(n.bL,{ref:t,className:(0,i.cn)("relative overflow-hidden",a),...o,children:[(0,s.jsx)(n.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,s.jsx)(l,{}),(0,s.jsx)(n.OK,{})]})});o.displayName=n.bL.displayName;let l=r.forwardRef((e,t)=>{let{className:a,orientation:r="vertical",...o}=e;return(0,s.jsx)(n.VM,{ref:t,orientation:r,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...o,children:(0,s.jsx)(n.lr,{className:"relative flex-1 rounded-full bg-border"})})});l.displayName=n.VM.displayName},241:(e,t,a)=>{"use strict";a.d(t,{dj:()=>f,oR:()=>u});var s=a(2115);let r=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=s.useState(d);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9602:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(3463),r=a(9795);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},853:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(7401).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2120:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let s=a(2651).A.create({baseURL:"/api",timeout:3e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>e,e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>(console.error("API Error:",e),Promise.reject(e)));let r=s}},e=>{var t=t=>e(e.s=t);e.O(0,[525,771,110,849,473,846,159,441,517,358],()=>t(8023)),_N_E=e.O()}]);